<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Objednávky jídel</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 6px 10px; text-align: left; }
    th { background: #f4f4f4; }
    input[type="text"], input[type="number"], input[type="date"], select {
      padding: 5px; width: 100%; box-sizing: border-box;
    }
    .row { display: flex; gap: 10px; margin-bottom: 10px; }
    .col { flex: 1; }
  </style>
</head>
<body>

  <h2>Nová objednávka</h2>
  <div class="row">
    <div class="col"><label>Datum: <input type="date" id="datumInput"></label></div>
    <div class="col"><label>Jméno: <input type="text" id="firstNameInput"></label></div>
    <div class="col"><label>Příjmení: <input type="text" id="lastNameInput"></label></div>
  </div>
  <div class="row">
    <div class="col"><label>Kontakt: <input type="text" id="contactInput"></label></div>
    <div class="col"><label>Typ menu:
      <select id="typeSelect">
        <option value="Celé menu">Celé menu</option>
        <option value="Poloviční menu">Poloviční menu</option>
      </select>
    </label></div>
    <div class="col"><label>Počet porcí: <input type="number" id="qtyInput" value="1" min="1"></label></div>
  </div>
  <div class="row">
    <div class="col"><label>Jídlo 1: <input type="text" id="jidlo1Input"></label></div>
    <div class="col"><label>Jídlo 2: <input type="text" id="jidlo2Input"></label></div>
  </div>
  <div class="row">
    <div class="col"><label>Doručení:
      <select id="deliverySelect">
        <option value="Vyzvednu">Vyzvednu</option>
        <option value="Přivézt">Přivézt</option>
      </select>
    </label></div>
    <div class="col"><label>Adresa: <input type="text" id="addressInput"></label></div>
  </div>

  <button id="submitOrder">Odeslat objednávku</button>

  <hr>
  <h2>Administrace objednávek</h2>
  <table id="adminTable"></table>

  <script>
    // ======= Uložení a načtení jména / příjmení =======
    const firstNameInput = document.getElementById('firstNameInput');
    const lastNameInput = document.getElementById('lastNameInput');
    firstNameInput.value = localStorage.getItem('firstName') || '';
    lastNameInput.value = localStorage.getItem('lastName') || '';
    firstNameInput.addEventListener('input', () => localStorage.setItem('firstName', firstNameInput.value));
    lastNameInput.addEventListener('input', () => localStorage.setItem('lastName', lastNameInput.value));

    // ======= Simulace odeslání (zde by byl fetch na Apps Script) =======
    const orders = [];
    document.getElementById('submitOrder').addEventListener('click', () => {
      const order = {
        datum: document.getElementById('datumInput').value,
        firstName: firstNameInput.value.trim(),
        lastName: lastNameInput.value.trim(),
        contact: document.getElementById('contactInput').value.trim(),
        type: document.getElementById('typeSelect').value,
        jidlo1: document.getElementById('jidlo1Input').value.trim(),
        jidlo2: document.getElementById('jidlo2Input').value.trim(),
        doruceni: document.getElementById('deliverySelect').value,
        adresa: document.getElementById('addressInput').value.trim(),
        qty: parseInt(document.getElementById('qtyInput').value) || 1,
        price: 155,
        vydano: false
      };
      orders.push(order);
      renderAdminTable(orders);
      alert('Objednávka přidána (lokálně)');
    });

    // ======= Vykreslení admin tabulky =======
    const adminTable = document.getElementById('adminTable');
    function renderAdminTable(rows) {
      if (!rows || rows.length === 0) {
        adminTable.innerHTML = '<tr><td>Žádné objednávky</td></tr>';
        return;
      }
      adminTable.innerHTML = `
        <tr>
          <th>Datum</th>
          <th>Jméno</th>
          <th>Příjmení</th>
          <th>Typ</th>
          <th>Jídlo1</th>
          <th>Jídlo2</th>
          <th>Doručení</th>
          <th>Adresa</th>
          <th>Počet</th>
          <th>Cena</th>
          <th>Vydáno</th>
        </tr>`;
      rows.forEach((r, i) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${r.datum}</td>
          <td>${r.firstName}</td>
          <td>${r.lastName}</td>
          <td>${r.type}</td>
          <td>${r.jidlo1}</td>
          <td>${r.jidlo2}</td>
          <td>${r.doruceni}</td>
          <td>${r.adresa}</td>
          <td>${r.qty}</td>
          <td>${r.price}</td>
          <td><input type="checkbox" data-id="${i}" ${r.vydano ? 'checked' : ''}></td>`;
        adminTable.appendChild(tr);
      });
    }
  </script>

</body>
</html>
